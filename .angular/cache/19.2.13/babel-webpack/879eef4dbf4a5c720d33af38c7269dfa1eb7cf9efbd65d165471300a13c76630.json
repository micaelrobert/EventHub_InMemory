{"ast":null,"code":"import { inject } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { FormBuilder, Validators, ReactiveFormsModule } from \"@angular/forms\";\nimport { MatCardModule } from \"@angular/material/card\";\nimport { MatButtonModule } from \"@angular/material/button\";\nimport { MatIconModule } from \"@angular/material/icon\";\nimport { MatFormFieldModule } from \"@angular/material/form-field\";\nimport { MatInputModule } from \"@angular/material/input\";\nimport { MatChipsModule } from \"@angular/material/chips\";\nimport { MatDialogModule, MatDialog } from \"@angular/material/dialog\";\nimport { IngressosService } from \"../../services/ingressos.service\";\nimport { NotificationService } from \"../../services/notification.service\";\nimport { StatusIngresso } from \"../../models/ingresso.model\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/material/card\";\nimport * as i4 from \"@angular/material/button\";\nimport * as i5 from \"@angular/material/icon\";\nimport * as i6 from \"@angular/material/form-field\";\nimport * as i7 from \"@angular/material/input\";\nimport * as i8 from \"@angular/material/chips\";\nfunction MeusIngressosComponent_mat_error_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Email \\u00E9 obrigat\\u00F3rio \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MeusIngressosComponent_mat_error_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Email inv\\u00E1lido \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MeusIngressosComponent_mat_icon_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-icon\");\n    i0.ɵɵtext(1, \"search\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MeusIngressosComponent_mat_icon_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-icon\", 11);\n    i0.ɵɵtext(1, \"refresh\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MeusIngressosComponent_div_19_mat_card_1_button_56_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function MeusIngressosComponent_div_19_mat_card_1_button_56_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ingresso_r3 = i0.ɵɵnextContext().$implicit;\n      const ctx_r3 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r3.solicitarReembolso(ingresso_r3));\n    });\n    i0.ɵɵelementStart(1, \"mat-icon\");\n    i0.ɵɵtext(2, \"money_off\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \" Solicitar Reembolso \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MeusIngressosComponent_div_19_mat_card_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"mat-card\", 14)(1, \"mat-card-header\")(2, \"mat-card-title\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"mat-card-subtitle\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"mat-card-content\")(7, \"div\", 15)(8, \"div\", 16)(9, \"mat-icon\");\n    i0.ɵɵtext(10, \"person\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"span\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"div\", 16)(14, \"mat-icon\");\n    i0.ɵɵtext(15, \"email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"span\");\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(18, \"div\", 16)(19, \"mat-icon\");\n    i0.ɵɵtext(20, \"phone\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"span\");\n    i0.ɵɵtext(22);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(23, \"div\", 16)(24, \"mat-icon\");\n    i0.ɵɵtext(25, \"event\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"span\");\n    i0.ɵɵtext(27);\n    i0.ɵɵpipe(28, \"date\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(29, \"div\", 16)(30, \"mat-icon\");\n    i0.ɵɵtext(31, \"place\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(32, \"span\");\n    i0.ɵɵtext(33);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(34, \"div\", 16)(35, \"mat-icon\");\n    i0.ɵɵtext(36, \"confirmation_number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(37, \"span\");\n    i0.ɵɵtext(38);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(39, \"div\", 16)(40, \"mat-icon\");\n    i0.ɵɵtext(41, \"attach_money\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(42, \"span\");\n    i0.ɵɵtext(43);\n    i0.ɵɵpipe(44, \"currency\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(45, \"div\", 16)(46, \"mat-icon\");\n    i0.ɵɵtext(47, \"shopping_cart\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(48, \"span\");\n    i0.ɵɵtext(49);\n    i0.ɵɵpipe(50, \"date\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(51, \"div\", 17)(52, \"mat-chip-set\")(53, \"mat-chip\", 18);\n    i0.ɵɵtext(54);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(55, \"mat-card-actions\");\n    i0.ɵɵtemplate(56, MeusIngressosComponent_div_19_mat_card_1_button_56_Template, 4, 0, \"button\", 19);\n    i0.ɵɵelementStart(57, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function MeusIngressosComponent_div_19_mat_card_1_Template_button_click_57_listener() {\n      const ingresso_r3 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r3 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r3.baixarIngresso(ingresso_r3));\n    });\n    i0.ɵɵelementStart(58, \"mat-icon\");\n    i0.ɵɵtext(59, \"download\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(60, \" Baixar PDF \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ingresso_r3 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ingresso_r3.evento == null ? null : ingresso_r3.evento.nome);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" C\\u00F3digo: \", ingresso_r3.codigo, \" \");\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(ingresso_r3.nomeComprador);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ingresso_r3.emailComprador);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ingresso_r3.telefoneComprador);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(28, 14, ingresso_r3.evento == null ? null : ingresso_r3.evento.dataEvento, \"dd/MM/yyyy HH:mm\"));\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(ingresso_r3.evento == null ? null : ingresso_r3.evento.local);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate2(\"\", ingresso_r3.quantidade, \" \", ingresso_r3.quantidade === 1 ? \"ingresso\" : \"ingressos\", \"\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind4(44, 17, ingresso_r3.valorTotal, \"BRL\", \"symbol\", \"1.2-2\"));\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(50, 22, ingresso_r3.dataCompra, \"dd/MM/yyyy HH:mm\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"color\", ctx_r3.getStatusColor(ingresso_r3.status));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ingresso_r3.status, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ingresso_r3.status === ctx_r3.statusIngresso.Ativo && ctx_r3.podeReembolsar(ingresso_r3));\n  }\n}\nfunction MeusIngressosComponent_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵtemplate(1, MeusIngressosComponent_div_19_mat_card_1_Template, 61, 25, \"mat-card\", 13);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.ingressos);\n  }\n}\nfunction MeusIngressosComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22)(1, \"mat-icon\");\n    i0.ɵɵtext(2, \"receipt_long\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"h2\");\n    i0.ɵɵtext(4, \"Nenhum ingresso encontrado\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6, \"N\\u00E3o foram encontrados ingressos para o email informado.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport let MeusIngressosComponent = /*#__PURE__*/(() => {\n  class MeusIngressosComponent {\n    fb = inject(FormBuilder);\n    ingressosService = inject(IngressosService);\n    notificationService = inject(NotificationService);\n    dialog = inject(MatDialog);\n    buscaForm;\n    ingressos = [];\n    buscando = false;\n    emailBuscado = false;\n    statusIngresso = StatusIngresso;\n    ngOnInit() {\n      this.criarForm();\n    }\n    criarForm() {\n      this.buscaForm = this.fb.group({\n        email: [\"\", [Validators.required, Validators.email]]\n      });\n    }\n    buscarIngressos() {\n      if (this.buscaForm.valid) {\n        this.buscando = true;\n        const email = this.buscaForm.value.email;\n        this.ingressosService.getIngressosPorEmail(email).subscribe({\n          next: response => {\n            this.buscando = false;\n            this.emailBuscado = true;\n            if (response.sucesso && response.dados) {\n              this.ingressos = response.dados;\n              if (this.ingressos.length === 0) {\n                this.notificationService.info(\"Nenhum ingresso encontrado para este email\");\n              }\n            } else {\n              this.notificationService.error(response.mensagem);\n              this.ingressos = [];\n            }\n          },\n          error: () => {\n            this.buscando = false;\n            this.emailBuscado = true;\n            this.ingressos = [];\n            this.notificationService.error(\"Erro ao buscar ingressos\");\n          }\n        });\n      }\n    }\n    getStatusColor(status) {\n      switch (status) {\n        case StatusIngresso.Ativo:\n          return \"primary\";\n        case StatusIngresso.Cancelado:\n          return \"warn\";\n        case StatusIngresso.Usado:\n          return \"accent\";\n        default:\n          return \"\";\n      }\n    }\n    podeReembolsar(ingresso) {\n      if (!ingresso.evento?.dataEvento) return false;\n      const dataEvento = new Date(ingresso.evento.dataEvento);\n      const agora = new Date();\n      const diferencaHoras = (dataEvento.getTime() - agora.getTime()) / (1000 * 60 * 60);\n      return diferencaHoras > 24; // Pode reembolsar até 24h antes do evento\n    }\n    solicitarReembolso(ingresso) {\n      // Implementar dialog de reembolso\n      this.notificationService.info(\"Funcionalidade de reembolso será implementada\");\n    }\n    baixarIngresso(ingresso) {\n      // Implementar geração de PDF\n      this.notificationService.info(\"Download de PDF será implementado\");\n    }\n    static ɵfac = function MeusIngressosComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || MeusIngressosComponent)();\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: MeusIngressosComponent,\n      selectors: [[\"app-meus-ingressos\"]],\n      decls: 21,\n      vars: 9,\n      consts: [[1, \"meus-ingressos-container\"], [1, \"header\"], [1, \"busca-card\"], [1, \"busca-form\", 3, \"ngSubmit\", \"formGroup\"], [\"appearance\", \"outline\", 1, \"email-field\"], [\"matInput\", \"\", \"type\", \"email\", \"formControlName\", \"email\", \"placeholder\", \"seu@email.com\"], [4, \"ngIf\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", \"type\", \"submit\", 3, \"disabled\"], [\"class\", \"spinning\", 4, \"ngIf\"], [\"class\", \"ingressos-list\", 4, \"ngIf\"], [\"class\", \"no-ingressos\", 4, \"ngIf\"], [1, \"spinning\"], [1, \"ingressos-list\"], [\"class\", \"ingresso-card\", 4, \"ngFor\", \"ngForOf\"], [1, \"ingresso-card\"], [1, \"ingresso-info\"], [1, \"info-row\"], [1, \"status-chip\"], [3, \"color\"], [\"mat-button\", \"\", \"color\", \"warn\", 3, \"click\", 4, \"ngIf\"], [\"mat-button\", \"\", \"color\", \"primary\", 3, \"click\"], [\"mat-button\", \"\", \"color\", \"warn\", 3, \"click\"], [1, \"no-ingressos\"]],\n      template: function MeusIngressosComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h1\");\n          i0.ɵɵtext(3, \"Meus Ingressos\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"p\");\n          i0.ɵɵtext(5, \"Consulte seus ingressos informando seu email\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(6, \"mat-card\", 2)(7, \"mat-card-content\")(8, \"form\", 3);\n          i0.ɵɵlistener(\"ngSubmit\", function MeusIngressosComponent_Template_form_ngSubmit_8_listener() {\n            return ctx.buscarIngressos();\n          });\n          i0.ɵɵelementStart(9, \"mat-form-field\", 4)(10, \"mat-label\");\n          i0.ɵɵtext(11, \"Email\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(12, \"input\", 5);\n          i0.ɵɵtemplate(13, MeusIngressosComponent_mat_error_13_Template, 2, 0, \"mat-error\", 6)(14, MeusIngressosComponent_mat_error_14_Template, 2, 0, \"mat-error\", 6);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"button\", 7);\n          i0.ɵɵtemplate(16, MeusIngressosComponent_mat_icon_16_Template, 2, 0, \"mat-icon\", 6)(17, MeusIngressosComponent_mat_icon_17_Template, 2, 0, \"mat-icon\", 8);\n          i0.ɵɵtext(18);\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵtemplate(19, MeusIngressosComponent_div_19_Template, 2, 1, \"div\", 9)(20, MeusIngressosComponent_div_20_Template, 7, 0, \"div\", 10);\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          let tmp_1_0;\n          let tmp_2_0;\n          i0.ɵɵadvance(8);\n          i0.ɵɵproperty(\"formGroup\", ctx.buscaForm);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", (tmp_1_0 = ctx.buscaForm.get(\"email\")) == null ? null : tmp_1_0.hasError(\"required\"));\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", (tmp_2_0 = ctx.buscaForm.get(\"email\")) == null ? null : tmp_2_0.hasError(\"email\"));\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"disabled\", ctx.buscaForm.invalid || ctx.buscando);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", !ctx.buscando);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.buscando);\n          i0.ɵɵadvance();\n          i0.ɵɵtextInterpolate1(\" \", ctx.buscando ? \"Buscando...\" : \"Buscar\", \" \");\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.ingressos.length > 0);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.emailBuscado && ctx.ingressos.length === 0);\n        }\n      },\n      dependencies: [CommonModule, i1.NgForOf, i1.NgIf, i1.CurrencyPipe, i1.DatePipe, ReactiveFormsModule, i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName, MatCardModule, i3.MatCard, i3.MatCardActions, i3.MatCardContent, i3.MatCardHeader, i3.MatCardSubtitle, i3.MatCardTitle, MatButtonModule, i4.MatButton, MatIconModule, i5.MatIcon, MatFormFieldModule, i6.MatFormField, i6.MatLabel, i6.MatError, MatInputModule, i7.MatInput, MatChipsModule, i8.MatChip, i8.MatChipSet, MatDialogModule],\n      styles: [\".meus-ingressos-container[_ngcontent-%COMP%]{padding:2rem;max-width:1200px;margin:0 auto}.header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#1976d2;margin-bottom:.5rem}.busca-card[_ngcontent-%COMP%]{margin-bottom:2rem}.busca-form[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:flex-start}.email-field[_ngcontent-%COMP%]{flex:1}.ingressos-list[_ngcontent-%COMP%]{display:grid;gap:1.5rem}.ingresso-card[_ngcontent-%COMP%]{transition:transform .2s,box-shadow .2s}.ingresso-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #0000001a}.ingresso-info[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:.75rem;margin:1rem 0}.info-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#555}.info-row[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.status-chip[_ngcontent-%COMP%]{margin:1rem 0}.no-ingressos[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;color:#666}.no-ingressos[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:4rem;width:4rem;height:4rem;margin-bottom:1rem}.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.meus-ingressos-container[_ngcontent-%COMP%]{padding:1rem}.busca-form[_ngcontent-%COMP%]{flex-direction:column}.ingresso-info[_ngcontent-%COMP%]{grid-template-columns:1fr}}\"]\n    });\n  }\n  return MeusIngressosComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}