{"ast":null,"code":"import { inject } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { ActivatedRoute, Router, RouterLink } from \"@angular/router\";\nimport { MatCardModule } from \"@angular/material/card\";\nimport { MatButtonModule } from \"@angular/material/button\";\nimport { MatIconModule } from \"@angular/material/icon\";\nimport { MatChipsModule } from \"@angular/material/chips\";\nimport { MatDialog } from \"@angular/material/dialog\";\nimport { EventosService } from \"../../services/eventos.service\"; // Verifique se o caminho está correto\nimport { NotificationService } from \"../../services/notification.service\"; // Verifique se o caminho está correto\nimport { ComprarIngressoDialogComponent } from \"../comprar-ingresso-dialog/comprar-ingresso-dialog.component\"; // Verifique se o caminho está correto\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/material/card\";\nimport * as i3 from \"@angular/material/button\";\nimport * as i4 from \"@angular/material/icon\";\nimport * as i5 from \"@angular/material/chips\";\nfunction EventoDetailsComponent_div_0_mat_chip_76_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-chip\", 14);\n    i0.ɵɵtext(1, \" Esgotado \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EventoDetailsComponent_div_0_mat_chip_77_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-chip\", 15);\n    i0.ɵɵtext(1, \" \\u00DAltimos ingressos \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EventoDetailsComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"button\", 3)(2, \"mat-icon\");\n    i0.ɵɵtext(3, \"arrow_back\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \" Voltar para Eventos \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"mat-card\", 4)(6, \"mat-card-header\")(7, \"mat-card-title\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"mat-card-subtitle\")(10, \"mat-icon\");\n    i0.ɵɵtext(11, \"place\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"mat-card-content\")(14, \"div\", 5)(15, \"div\", 6)(16, \"h3\");\n    i0.ɵɵtext(17, \"Descri\\u00E7\\u00E3o\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"p\");\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(20, \"div\", 7)(21, \"div\", 8)(22, \"mat-icon\");\n    i0.ɵɵtext(23, \"event\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"div\")(25, \"strong\");\n    i0.ɵɵtext(26, \"Data e Hora\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"p\");\n    i0.ɵɵtext(28);\n    i0.ɵɵpipe(29, \"date\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(30, \"div\", 8)(31, \"mat-icon\");\n    i0.ɵɵtext(32, \"attach_money\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(33, \"div\")(34, \"strong\");\n    i0.ɵɵtext(35, \"Pre\\u00E7o\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(36, \"p\");\n    i0.ɵɵtext(37);\n    i0.ɵɵpipe(38, \"currency\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(39, \"div\", 8)(40, \"mat-icon\");\n    i0.ɵɵtext(41, \"people\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(42, \"div\")(43, \"strong\");\n    i0.ɵɵtext(44, \"Capacidade\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(45, \"p\");\n    i0.ɵɵtext(46);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(47, \"div\", 8)(48, \"mat-icon\");\n    i0.ɵɵtext(49, \"confirmation_number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(50, \"div\")(51, \"strong\");\n    i0.ɵɵtext(52, \"Dispon\\u00EDveis\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(53, \"p\");\n    i0.ɵɵtext(54);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(55, \"div\", 8)(56, \"mat-icon\");\n    i0.ɵɵtext(57, \"shopping_cart\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(58, \"div\")(59, \"strong\");\n    i0.ɵɵtext(60, \"Vendidos\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(61, \"p\");\n    i0.ɵɵtext(62);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(63, \"div\", 8)(64, \"mat-icon\");\n    i0.ɵɵtext(65, \"calendar_today\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(66, \"div\")(67, \"strong\");\n    i0.ɵɵtext(68, \"Criado em\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(69, \"p\");\n    i0.ɵɵtext(70);\n    i0.ɵɵpipe(71, \"date\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(72, \"div\", 9)(73, \"mat-chip-set\")(74, \"mat-chip\", 10);\n    i0.ɵɵtext(75);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(76, EventoDetailsComponent_div_0_mat_chip_76_Template, 2, 0, \"mat-chip\", 11)(77, EventoDetailsComponent_div_0_mat_chip_77_Template, 2, 0, \"mat-chip\", 12);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(78, \"mat-card-actions\")(79, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function EventoDetailsComponent_div_0_Template_button_click_79_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.comprarIngresso());\n    });\n    i0.ɵɵelementStart(80, \"mat-icon\");\n    i0.ɵɵtext(81, \"shopping_cart\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(82, \" Comprar Ingresso \");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate(ctx_r1.evento.nome);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.evento.local, \" \");\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(ctx_r1.evento.descricao);\n    i0.ɵɵadvance(9);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(29, 14, ctx_r1.evento.dataEvento, \"dd/MM/yyyy HH:mm\"));\n    i0.ɵɵadvance(9);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind4(38, 17, ctx_r1.evento.precoIngresso, \"BRL\", \"symbol\", \"1.2-2\"));\n    i0.ɵɵadvance(9);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r1.evento.capacidadeMaxima, \" pessoas\");\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r1.evento.ingressosDisponiveis, \" ingressos\");\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r1.evento.ingressosVendidos, \" ingressos\");\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(71, 22, ctx_r1.evento.dataCriacao, \"dd/MM/yyyy\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"color\", ctx_r1.evento.ativo ? \"primary\" : \"warn\");\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.evento.ativo ? \"Ativo\" : \"Inativo\", \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.evento.ingressosDisponiveis === 0);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.evento.ingressosDisponiveis > 0 && ctx_r1.evento.ingressosDisponiveis <= 10);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", !ctx_r1.evento.ativo || ctx_r1.evento.ingressosDisponiveis === 0);\n  }\n}\nfunction EventoDetailsComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16)(1, \"p\");\n    i0.ɵɵtext(2, \"Carregando evento...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport let EventoDetailsComponent = /*#__PURE__*/(() => {\n  class EventoDetailsComponent {\n    route = inject(ActivatedRoute);\n    router = inject(Router);\n    eventosService = inject(EventosService);\n    notificationService = inject(NotificationService);\n    dialog = inject(MatDialog);\n    evento = null;\n    ngOnInit() {\n      const id = this.route.snapshot.paramMap.get(\"id\");\n      if (id) {\n        this.carregarEvento(+id); // O '+' converte string para number\n      } else {\n        // Se não houver ID, talvez redirecionar para uma página de erro ou lista\n        this.notificationService.warning(\"ID do evento não fornecido.\");\n        this.router.navigate([\"/eventos\"]); // Ou para o catálogo, se fizer mais sentido\n      }\n    }\n    carregarEvento(id) {\n      this.eventosService.getEvento(id).subscribe({\n        next: response => {\n          if (response.sucesso && response.dados) {\n            this.evento = response.dados;\n          } else {\n            this.notificationService.error(response.mensagem || \"Evento não encontrado.\");\n            this.router.navigate([\"/eventos\"]); // Ou catálogo\n          }\n        },\n        error: err => {\n          console.error(\"Erro ao carregar evento:\", err); // Log para o console do dev\n          this.notificationService.error(\"Erro ao carregar os detalhes do evento.\");\n          this.router.navigate([\"/eventos\"]); // Ou catálogo\n        }\n      });\n    }\n    comprarIngresso() {\n      if (this.evento) {\n        const dialogRef = this.dialog.open(ComprarIngressoDialogComponent, {\n          width: \"500px\",\n          data: {\n            evento: this.evento\n          },\n          // Passa o objeto evento completo para o dialog\n          panelClass: \"modern-dialog\" // Se você tiver estilos globais para dialogs\n        });\n        dialogRef.afterClosed().subscribe(result => {\n          if (result && this.evento) {\n            // 'result' pode ser true se a compra foi \"bem-sucedida\" no dialog\n            // Recarregar o evento pode ser útil para atualizar o número de ingressos disponíveis\n            this.carregarEvento(this.evento.id);\n            this.notificationService.success(\"Compra de ingresso simulada com sucesso!\");\n          }\n        });\n      }\n    }\n    static ɵfac = function EventoDetailsComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || EventoDetailsComponent)();\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: EventoDetailsComponent,\n      selectors: [[\"app-evento-details\"]],\n      decls: 3,\n      vars: 2,\n      consts: [[\"loading\", \"\"], [\"class\", \"evento-details-container\", 4, \"ngIf\", \"ngIfElse\"], [1, \"evento-details-container\"], [\"mat-button\", \"\", \"routerLink\", \"/eventos\", 1, \"back-button\"], [1, \"evento-card\"], [1, \"evento-info\"], [1, \"info-section\"], [1, \"info-grid\"], [1, \"info-item\"], [1, \"status-section\"], [3, \"color\"], [\"color\", \"warn\", 4, \"ngIf\"], [\"color\", \"accent\", 4, \"ngIf\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\", \"disabled\"], [\"color\", \"warn\"], [\"color\", \"accent\"], [1, \"loading\"]],\n      template: function EventoDetailsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵtemplate(0, EventoDetailsComponent_div_0_Template, 83, 25, \"div\", 1)(1, EventoDetailsComponent_ng_template_1_Template, 3, 0, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n        }\n        if (rf & 2) {\n          const loading_r3 = i0.ɵɵreference(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.evento)(\"ngIfElse\", loading_r3);\n        }\n      },\n      dependencies: [CommonModule, i1.NgIf, i1.CurrencyPipe, i1.DatePipe, RouterLink, MatCardModule, i2.MatCard, i2.MatCardActions, i2.MatCardContent, i2.MatCardHeader, i2.MatCardSubtitle, i2.MatCardTitle, MatButtonModule, i3.MatButton, MatIconModule, i4.MatIcon, MatChipsModule, i5.MatChip, i5.MatChipSet],\n      styles: [\".evento-details-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;padding:2rem 3rem;max-width:100%;width:100vw;box-sizing:border-box;margin:0}.back-button[_ngcontent-%COMP%]{margin-bottom:1rem}.evento-card[_ngcontent-%COMP%]{width:100%;max-width:100%;margin:0;box-shadow:0 4px 20px #0000001a;border-radius:12px;overflow:hidden;box-sizing:border-box}.evento-info[_ngcontent-%COMP%]{padding:2rem}.info-section[_ngcontent-%COMP%]{margin-bottom:2rem}.info-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#1976d2;margin-bottom:.5rem}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:2.5rem}.info-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:1rem;padding:1.2rem;background:#f5f5f5;border-radius:8px}.info-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#1976d2;margin-top:.25rem}.info-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;margin-bottom:.25rem;color:#333}.info-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666}.status-section[_ngcontent-%COMP%]{margin:2rem 0}.loading[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;color:#666}@media (max-width: 768px){.evento-details-container[_ngcontent-%COMP%]{padding:1.5rem;width:100%}.info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.evento-card[_ngcontent-%COMP%]{max-width:100%}}\"]\n    });\n  }\n  return EventoDetailsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}