{"ast":null,"code":"// src/app/components/evento-details/evento-details.component.ts (AJUSTADO)\nimport { inject } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { ActivatedRoute, Router, RouterLink } from \"@angular/router\";\nimport { MatCardModule } from \"@angular/material/card\";\nimport { MatButtonModule } from \"@angular/material/button\";\nimport { MatIconModule } from \"@angular/material/icon\";\nimport { MatChipsModule } from \"@angular/material/chips\";\n// import { MatDialog } from \"@angular/material/dialog\"; // REMOVIDO: Não precisamos mais do MatDialog aqui\n// import { ComprarIngressoDialogComponent } from \"../comprar-ingresso-dialog/comprar-ingresso-dialog.component\"; // REMOVIDO: Não precisamos mais do ComprarIngressoDialogComponent\nimport { MatDividerModule } from '@angular/material/divider';\nimport { EventosService } from \"../../services/eventos.service\";\nimport { NotificationService } from \"../../services/notification.service\";\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/material/card\";\nimport * as i3 from \"@angular/material/button\";\nimport * as i4 from \"@angular/material/icon\";\nimport * as i5 from \"@angular/material/chips\";\nimport * as i6 from \"@angular/material/divider\";\nimport * as i7 from \"@angular/material/progress-spinner\";\nfunction EventoDetailsComponent_div_0_mat_chip_77_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-chip\", 21);\n    i0.ɵɵtext(1, \" Esgotado \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EventoDetailsComponent_div_0_mat_chip_78_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-chip\", 22);\n    i0.ɵɵtext(1, \" \\u00DAltimos ingressos \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EventoDetailsComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"button\", 3)(2, \"mat-icon\");\n    i0.ɵɵtext(3, \"arrow_back\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \" Voltar para Eventos \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"mat-card\", 4)(6, \"mat-card-header\", 5)(7, \"mat-card-title\", 6);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"mat-card-subtitle\", 7)(10, \"mat-icon\");\n    i0.ɵɵtext(11, \"place\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"mat-card-content\", 8)(14, \"div\", 9)(15, \"h3\");\n    i0.ɵɵtext(16, \"Descri\\u00E7\\u00E3o do Evento\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"p\", 10);\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(19, \"mat-divider\", 11);\n    i0.ɵɵelementStart(20, \"div\", 12)(21, \"div\", 13)(22, \"mat-icon\", 14);\n    i0.ɵɵtext(23, \"event\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"div\")(25, \"strong\");\n    i0.ɵɵtext(26, \"Data e Hora\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"p\");\n    i0.ɵɵtext(28);\n    i0.ɵɵpipe(29, \"date\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(30, \"div\", 13)(31, \"mat-icon\", 14);\n    i0.ɵɵtext(32, \"attach_money\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(33, \"div\")(34, \"strong\");\n    i0.ɵɵtext(35, \"Pre\\u00E7o do Ingresso\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(36, \"p\");\n    i0.ɵɵtext(37);\n    i0.ɵɵpipe(38, \"currency\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(39, \"div\", 13)(40, \"mat-icon\", 14);\n    i0.ɵɵtext(41, \"people\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(42, \"div\")(43, \"strong\");\n    i0.ɵɵtext(44, \"Capacidade M\\u00E1xima\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(45, \"p\");\n    i0.ɵɵtext(46);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(47, \"div\", 13)(48, \"mat-icon\", 14);\n    i0.ɵɵtext(49, \"confirmation_number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(50, \"div\")(51, \"strong\");\n    i0.ɵɵtext(52, \"Ingressos Dispon\\u00EDveis\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(53, \"p\");\n    i0.ɵɵtext(54);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(55, \"div\", 13)(56, \"mat-icon\", 14);\n    i0.ɵɵtext(57, \"shopping_cart\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(58, \"div\")(59, \"strong\");\n    i0.ɵɵtext(60, \"Ingressos Vendidos\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(61, \"p\");\n    i0.ɵɵtext(62);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(63, \"div\", 13)(64, \"mat-icon\", 14);\n    i0.ɵɵtext(65, \"calendar_today\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(66, \"div\")(67, \"strong\");\n    i0.ɵɵtext(68, \"Criado em\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(69, \"p\");\n    i0.ɵɵtext(70);\n    i0.ɵɵpipe(71, \"date\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelement(72, \"mat-divider\", 11);\n    i0.ɵɵelementStart(73, \"div\", 15)(74, \"mat-chip-set\")(75, \"mat-chip\", 16);\n    i0.ɵɵtext(76);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(77, EventoDetailsComponent_div_0_mat_chip_77_Template, 2, 0, \"mat-chip\", 17)(78, EventoDetailsComponent_div_0_mat_chip_78_Template, 2, 0, \"mat-chip\", 18);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(79, \"mat-card-actions\", 19)(80, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function EventoDetailsComponent_div_0_Template_button_click_80_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.comprarIngresso());\n    });\n    i0.ɵɵelementStart(81, \"mat-icon\");\n    i0.ɵɵtext(82, \"shopping_cart\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(83, \" Comprar Ingresso \");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate(ctx_r1.evento.nome);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.evento.local, \" \");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(ctx_r1.evento.descricao);\n    i0.ɵɵadvance(10);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(29, 14, ctx_r1.evento.dataEvento, \"dd/MM/yyyy HH:mm\"));\n    i0.ɵɵadvance(9);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind4(38, 17, ctx_r1.evento.precoIngresso, \"BRL\", \"symbol\", \"1.2-2\"));\n    i0.ɵɵadvance(9);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r1.evento.capacidadeMaxima, \" pessoas\");\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r1.evento.ingressosDisponiveis, \" ingressos\");\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r1.evento.ingressosVendidos, \" ingressos\");\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(71, 22, ctx_r1.evento.dataCriacao, \"dd/MM/yyyy\"));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"color\", ctx_r1.evento.ativo ? \"primary\" : \"warn\");\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.evento.ativo ? \"Ativo\" : \"Inativo\", \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.evento.ingressosDisponiveis === 0);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.evento.ingressosDisponiveis > 0 && ctx_r1.evento.ingressosDisponiveis <= 10);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", !ctx_r1.evento.ativo || ctx_r1.evento.ingressosDisponiveis === 0);\n  }\n}\nfunction EventoDetailsComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵelement(1, \"mat-spinner\", 24);\n    i0.ɵɵelementStart(2, \"p\");\n    i0.ɵɵtext(3, \"Carregando detalhes do evento...\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport let EventoDetailsComponent = /*#__PURE__*/(() => {\n  class EventoDetailsComponent {\n    route = inject(ActivatedRoute);\n    router = inject(Router);\n    eventosService = inject(EventosService);\n    notificationService = inject(NotificationService);\n    // private dialog = inject(MatDialog); // REMOVIDO: Não precisamos mais do MatDialog aqui\n    evento = null;\n    ngOnInit() {\n      const id = this.route.snapshot.paramMap.get(\"id\");\n      if (id) {\n        this.carregarEvento(+id); // O '+' converte string para number\n      } else {\n        this.notificationService.warning(\"ID do evento não fornecido.\");\n        this.router.navigate([\"/eventos\"]); // Volta para a lista de eventos\n      }\n    }\n    carregarEvento(id) {\n      this.eventosService.getEvento(id).subscribe({\n        next: response => {\n          if (response.sucesso && response.dados) {\n            this.evento = response.dados;\n          } else {\n            this.notificationService.error(response.mensagem || \"Evento não encontrado.\");\n            this.router.navigate([\"/eventos\"]);\n          }\n        },\n        error: err => {\n          console.error(\"Erro ao carregar evento:\", err);\n          this.notificationService.error(\"Erro ao carregar os detalhes do evento.\");\n          this.router.navigate([\"/eventos\"]);\n        }\n      });\n    }\n    // MÉTODO COMPRAR INGRESSO ATUALIZADO PARA NAVEGAR PARA A NOVA PAGE\n    comprarIngresso() {\n      if (this.evento && this.evento.id) {\n        // Garante que o evento e seu ID existem\n        this.router.navigate(['/comprar', this.evento.id]); // NAVEGA para a nova rota de compra\n      } else {\n        this.notificationService.error(\"Não foi possível iniciar a compra: evento inválido.\");\n      }\n    }\n    static ɵfac = function EventoDetailsComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || EventoDetailsComponent)();\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: EventoDetailsComponent,\n      selectors: [[\"app-evento-details\"]],\n      decls: 3,\n      vars: 2,\n      consts: [[\"loadingTemplate\", \"\"], [\"class\", \"event-details-page-wrapper\", 4, \"ngIf\", \"ngIfElse\"], [1, \"event-details-page-wrapper\"], [\"mat-flat-button\", \"\", \"routerLink\", \"/eventos\", 1, \"back-button\"], [1, \"event-detail-card\"], [1, \"card-header-main\"], [1, \"event-title-main\"], [1, \"event-location-main\"], [1, \"card-content-detail\"], [1, \"description-section\"], [1, \"event-description-text\"], [1, \"section-divider\"], [1, \"info-grid-details\"], [1, \"info-item-detail\"], [1, \"info-icon\"], [1, \"status-chips-section\"], [\"selected\", \"\", 3, \"color\"], [\"color\", \"warn\", \"selected\", \"\", 4, \"ngIf\"], [\"color\", \"accent\", \"selected\", \"\", 4, \"ngIf\"], [1, \"card-actions-bottom\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\", \"disabled\"], [\"color\", \"warn\", \"selected\", \"\"], [\"color\", \"accent\", \"selected\", \"\"], [1, \"loading-full-page-indicator\"], [\"diameter\", \"50\"]],\n      template: function EventoDetailsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵtemplate(0, EventoDetailsComponent_div_0_Template, 84, 25, \"div\", 1)(1, EventoDetailsComponent_ng_template_1_Template, 4, 0, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n        }\n        if (rf & 2) {\n          const loadingTemplate_r3 = i0.ɵɵreference(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.evento)(\"ngIfElse\", loadingTemplate_r3);\n        }\n      },\n      dependencies: [CommonModule, i1.NgIf, i1.CurrencyPipe, i1.DatePipe, RouterLink, MatCardModule, i2.MatCard, i2.MatCardActions, i2.MatCardContent, i2.MatCardHeader, i2.MatCardSubtitle, i2.MatCardTitle, MatButtonModule, i3.MatButton, MatIconModule, i4.MatIcon, MatChipsModule, i5.MatChip, i5.MatChipSet, MatDividerModule, i6.MatDivider, MatProgressSpinnerModule, i7.MatProgressSpinner],\n      styles: [\".evento-details-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;padding:2rem 3rem;max-width:100%;width:100vw;box-sizing:border-box;margin:0}.back-button[_ngcontent-%COMP%]{margin-bottom:1rem}.evento-card[_ngcontent-%COMP%]{width:100%;max-width:100%;margin:0;box-shadow:0 4px 20px #0000001a;border-radius:12px;overflow:hidden;box-sizing:border-box}.evento-info[_ngcontent-%COMP%]{padding:2rem}.info-section[_ngcontent-%COMP%]{margin-bottom:2rem}.info-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#1976d2;margin-bottom:.5rem}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:2.5rem}.info-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:1rem;padding:1.2rem;background:#f5f5f5;border-radius:8px}.info-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#1976d2;margin-top:.25rem}.info-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;margin-bottom:.25rem;color:#333}.info-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666}.status-section[_ngcontent-%COMP%]{margin:2rem 0}.loading[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem;color:#666}@media (max-width: 768px){.evento-details-container[_ngcontent-%COMP%]{padding:1.5rem;width:100%}.info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.evento-card[_ngcontent-%COMP%]{max-width:100%}}\"]\n    });\n  }\n  return EventoDetailsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}