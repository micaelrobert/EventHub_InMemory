{"ast":null,"code":"import { inject } from \"@angular/core\";\nimport { catchError, throwError } from \"rxjs\";\nimport { NotificationService } from \"../services/notification.service\"; // Ajuste o caminho se necessário\nexport const errorInterceptor = (req, next) => {\n  const notificationService = inject(NotificationService);\n  return next(req).pipe(catchError(error => {\n    let errorMessage = \"Erro desconhecido\";\n    if (error.error instanceof ErrorEvent) {\n      errorMessage = `Erro: ${error.error.message}`;\n    } else {\n      switch (error.status) {\n        case 400:\n          // Tenta pegar a mensagem do backend, ou um array de erros do ModelState\n          if (error.error?.errors && typeof error.error.errors === 'object') {\n            errorMessage = Object.values(error.error.errors).flat().join(' ');\n          } else if (error.error?.mensagem) {\n            errorMessage = error.error.mensagem;\n          } else {\n            errorMessage = \"Dados inválidos ou requisição malformada.\";\n          }\n          break;\n        case 401:\n          errorMessage = \"Não autorizado. Faça login novamente.\";\n          // Aqui você poderia também chamar authService.logout() e redirecionar para /login\n          break;\n        case 403:\n          errorMessage = \"Acesso negado. Você não tem permissão para este recurso.\";\n          break;\n        case 404:\n          errorMessage = \"Recurso não encontrado.\";\n          break;\n        case 500:\n          errorMessage = \"Erro interno do servidor. Tente novamente mais tarde.\";\n          break;\n        default:\n          errorMessage = `Erro ${error.status}: ${error.statusText || error.message}`;\n      }\n    }\n    notificationService.error(errorMessage);\n    return throwError(() => error); // Importante relançar o erro\n  }));\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}